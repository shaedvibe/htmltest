<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SHAED Vehicle ETA Tracking - PRD & Technical Architecture</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .animate-pulse-slow {
      animation: pulse 3s ease-in-out infinite;
    }
    @keyframes flow {
      0% { transform: translateX(0); }
      100% { transform: translateX(20px); }
    }
    .flow-arrow {
      animation: flow 1s ease-in-out infinite alternate;
    }
    .cone-shape {
      clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
    }
    .gradient-bronze { background: linear-gradient(135deg, #CD7F32, #8B4513); }
    .gradient-silver { background: linear-gradient(135deg, #C0C0C0, #A8A8A8); }
    .gradient-gold { background: linear-gradient(135deg, #FFD700, #FFA500); }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    // Icons
    const Icons = {
      Truck: () => (
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7h12m0 0l-4-4m4 4l-4 4m-8 6H4m0 0l4 4m-4-4l4-4" />
        </svg>
      ),
      Chart: () => (
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
        </svg>
      ),
      Database: () => (
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
        </svg>
      ),
      Users: () => (
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
      ),
      Clock: () => (
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      ),
      Alert: () => (
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
      ),
      Check: () => (
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
        </svg>
      ),
      ChevronRight: () => (
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
        </svg>
      ),
      ChevronDown: () => (
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
        </svg>
      ),
      Rocket: () => (
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m-.119-8.54a6 6 0 00-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 00-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 01-2.448-2.448 14.9 14.9 0 01.06-.312m-2.24 2.39a4.493 4.493 0 00-1.757 4.306 4.493 4.493 0 004.306-1.758M16.5 9a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" />
        </svg>
      ),
    };

    // Navigation Component
    const Navigation = ({ activeSection, setActiveSection }) => {
      const sections = [
        { id: 'overview', label: 'Overview', icon: Icons.Truck },
        { id: 'problem', label: 'Problem Statement', icon: Icons.Alert },
        { id: 'users', label: 'User Stories', icon: Icons.Users },
        { id: 'cone', label: 'Cone of Uncertainty', icon: Icons.Chart },
        { id: 'architecture', label: 'Technical Architecture', icon: Icons.Database },
        { id: 'medallion', label: 'Medallion Architecture', icon: Icons.Database },
        { id: 'tables', label: 'Data Model', icon: Icons.Database },
        { id: 'prediction', label: 'ETA Prediction', icon: Icons.Clock },
        { id: 'stellantis', label: 'Stellantis Codes', icon: Icons.Truck },
        { id: 'future', label: 'Future State', icon: Icons.Rocket },
      ];

      return (
        <nav className="bg-slate-900 text-white w-64 min-h-screen p-4 fixed left-0 top-0 overflow-y-auto">
          <div className="mb-8">
            <h1 className="text-2xl font-bold text-blue-400">SHAED</h1>
            <p className="text-sm text-slate-400">Vehicle ETA Tracking</p>
          </div>
          <ul className="space-y-1">
            {sections.map(({ id, label, icon: Icon }) => (
              <li key={id}>
                <button
                  onClick={() => setActiveSection(id)}
                  className={`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all ${
                    activeSection === id 
                      ? 'bg-blue-600 text-white' 
                      : 'text-slate-300 hover:bg-slate-800'
                  }`}
                >
                  <Icon />
                  <span className="text-sm">{label}</span>
                </button>
              </li>
            ))}
          </ul>
        </nav>
      );
    };

    // Collapsible Section Component
    const Collapsible = ({ title, children, defaultOpen = false }) => {
      const [isOpen, setIsOpen] = useState(defaultOpen);
      return (
        <div className="border border-slate-200 rounded-lg mb-4 overflow-hidden">
          <button
            onClick={() => setIsOpen(!isOpen)}
            className="w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 transition-colors"
          >
            <span className="font-semibold text-slate-800">{title}</span>
            {isOpen ? <Icons.ChevronDown /> : <Icons.ChevronRight />}
          </button>
          {isOpen && <div className="p-4 bg-white">{children}</div>}
        </div>
      );
    };

    // Overview Section
    const OverviewSection = () => (
      <div className="space-y-6">
        <div className="text-center mb-12">
          <h1 className="text-4xl font-bold text-slate-800 mb-4">Vehicle Production ETA Tracking</h1>
          <p className="text-xl text-slate-600">Product Requirements & Technical Architecture</p>
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white">
            <div className="text-4xl font-bold mb-2">85,000+</div>
            <div className="text-blue-100">Historical Transactions</div>
            <div className="text-sm text-blue-200 mt-2">2 years of data</div>
          </div>
          <div className="bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl p-6 text-white">
            <div className="text-4xl font-bold mb-2">18,000</div>
            <div className="text-emerald-100">Active Orders</div>
            <div className="text-sm text-emerald-200 mt-2">Currently tracking</div>
          </div>
          <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white">
            <div className="text-4xl font-bold mb-2">8</div>
            <div className="text-purple-100">OEMs Normalized</div>
            <div className="text-sm text-purple-200 mt-2">And expanding</div>
          </div>
        </div>

        <div className="bg-slate-50 rounded-xl p-6 mt-8">
          <h3 className="text-lg font-semibold mb-4">Document Structure</h3>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div className="bg-white rounded-lg p-4 border-l-4 border-blue-500">
              <h4 className="font-semibold text-blue-600">Part 1</h4>
              <p className="text-slate-600">Product Requirements</p>
              <ul className="text-sm text-slate-500 mt-2 space-y-1">
                <li>‚Ä¢ Problem Statement</li>
                <li>‚Ä¢ User Stories</li>
                <li>‚Ä¢ Success Metrics</li>
              </ul>
            </div>
            <div className="bg-white rounded-lg p-4 border-l-4 border-emerald-500">
              <h4 className="font-semibold text-emerald-600">Part 2</h4>
              <p className="text-slate-600">Technical Architecture</p>
              <ul className="text-sm text-slate-500 mt-2 space-y-1">
                <li>‚Ä¢ Medallion Architecture</li>
                <li>‚Ä¢ Data Model</li>
                <li>‚Ä¢ Prediction Logic</li>
              </ul>
            </div>
            <div className="bg-white rounded-lg p-4 border-l-4 border-purple-500">
              <h4 className="font-semibold text-purple-600">Part 3</h4>
              <p className="text-slate-600">Future State</p>
              <ul className="text-sm text-slate-500 mt-2 space-y-1">
                <li>‚Ä¢ BigQuery ML</li>
                <li>‚Ä¢ End-to-End Tracking</li>
                <li>‚Ä¢ API-First Ingestion</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    );

    // Problem Statement Section
    const ProblemSection = () => (
      <div className="space-y-6">
        <h2 className="text-3xl font-bold text-slate-800 mb-6">Problem Statement</h2>
        
        <div className="bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 rounded-r-xl p-6">
          <p className="text-lg text-slate-700 leading-relaxed">
            When a fleet customer orders a commercial vehicle through a dealership, they receive a 
            <span className="font-semibold text-red-600"> vague estimated delivery window</span> from the OEM 
            (e.g., "10-14 weeks"). This estimate rarely updates meaningfully as the vehicle progresses 
            through production, leaving dealers unable to answer the most common customer question:
          </p>
          <div className="text-center my-6">
            <span className="text-3xl font-bold text-red-600 italic">"Where's my truck?"</span>
          </div>
        </div>

        <h3 className="text-xl font-semibold mt-8 mb-4">Cascading Problems</h3>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {[
            { role: 'Upfitters', problem: 'Cannot schedule installation work', icon: 'üîß' },
            { role: 'Logistics Providers', problem: 'Cannot plan transport', icon: 'üöõ' },
            { role: 'Fleet Buyers', problem: 'Cannot coordinate driver assignments or retire equipment', icon: 'üë∑' },
            { role: 'Dealers', problem: 'Spend significant time manually checking portals and fielding calls', icon: 'üìû' },
          ].map(({ role, problem, icon }) => (
            <div key={role} className="bg-white border border-slate-200 rounded-lg p-4 flex items-start gap-4">
              <span className="text-3xl">{icon}</span>
              <div>
                <h4 className="font-semibold text-slate-800">{role}</h4>
                <p className="text-slate-600">{problem}</p>
              </div>
            </div>
          ))}
        </div>

        <div className="bg-blue-50 rounded-xl p-6 mt-8">
          <h3 className="text-xl font-semibold text-blue-800 mb-3">Root Cause</h3>
          <p className="text-slate-700">
            OEMs provide <span className="font-semibold">status codes</span>‚Äînot delivery intelligence.
          </p>
          <div className="mt-4 flex items-center gap-4">
            <div className="bg-red-100 text-red-700 px-4 py-2 rounded-lg font-mono">Status: KZ L</div>
            <span className="text-2xl">‚Üí</span>
            <div className="bg-green-100 text-green-700 px-4 py-2 rounded-lg">
              "Arriving March 19 ¬± 2 days (92% confidence)"
            </div>
          </div>
          <p className="text-slate-600 mt-4">
            SHAED transforms fragmented status updates into predictive delivery timelines by learning 
            from historical patterns across thousands of similar orders.
          </p>
        </div>

        <div className="bg-emerald-50 rounded-xl p-6 mt-6">
          <h3 className="text-xl font-semibold text-emerald-800 mb-3">Objective</h3>
          <p className="text-slate-700">
            Build an ETA prediction system that <span className="font-semibold">narrows the "cone of uncertainty"</span> as 
            a vehicle progresses from order placement through production, transit, and delivery‚Äîproviding 
            increasingly accurate arrival estimates at each milestone.
          </p>
        </div>
      </div>
    );

    // User Stories Section
    const UsersSection = () => {
      const [activeUser, setActiveUser] = useState('dealer');
      
      const users = {
        dealer: {
          title: 'Dealer Sales Rep',
          icon: 'üè¢',
          color: 'blue',
          stories: [
            'As a dealer sales rep, I want to see predicted delivery dates for all orders in my pipeline so I can proactively update customers before they call me.',
            'As a dealer sales rep, I want to be alerted when an order is taking longer than expected at any stage so I can investigate and manage customer expectations.',
          ]
        },
        fleet: {
          title: 'Fleet Buyer',
          icon: 'üöö',
          color: 'emerald',
          stories: [
            'As a fleet buyer, I want real-time visibility into where my order is in the production process so I can plan driver assignments and equipment retirement.',
            'As a fleet buyer, I want to see how the predicted delivery date has changed over time so I can understand the reliability of estimates.',
          ]
        },
        upfitter: {
          title: 'Upfitter',
          icon: 'üîß',
          color: 'purple',
          stories: [
            'As an upfitter, I want to know when vehicles will arrive at my facility so I can schedule installation crews and order parts.',
            'As an upfitter, I want early warning if a vehicle is delayed so I can reallocate resources to other jobs.',
          ]
        },
        logistics: {
          title: 'Logistics Provider',
          icon: 'üì¶',
          color: 'orange',
          stories: [
            'As a logistics provider, I want to know when a vehicle will be released from the plant or upfitter so I can dispatch transport.',
          ]
        },
      };

      const colorClasses = {
        blue: 'bg-blue-500 hover:bg-blue-600',
        emerald: 'bg-emerald-500 hover:bg-emerald-600',
        purple: 'bg-purple-500 hover:bg-purple-600',
        orange: 'bg-orange-500 hover:bg-orange-600',
      };

      return (
        <div className="space-y-6">
          <h2 className="text-3xl font-bold text-slate-800 mb-6">User Stories</h2>
          
          <div className="flex flex-wrap gap-2 mb-6">
            {Object.entries(users).map(([key, { title, icon, color }]) => (
              <button
                key={key}
                onClick={() => setActiveUser(key)}
                className={`px-4 py-2 rounded-lg font-medium transition-all ${
                  activeUser === key 
                    ? `${colorClasses[color]} text-white` 
                    : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                }`}
              >
                <span className="mr-2">{icon}</span>
                {title}
              </button>
            ))}
          </div>

          <div className="bg-white border border-slate-200 rounded-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <span className="text-4xl">{users[activeUser].icon}</span>
              <h3 className="text-2xl font-semibold text-slate-800">{users[activeUser].title}</h3>
            </div>
            <div className="space-y-4">
              {users[activeUser].stories.map((story, idx) => (
                <div key={idx} className="flex items-start gap-3 bg-slate-50 rounded-lg p-4">
                  <div className="w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center flex-shrink-0 mt-0.5">
                    {idx + 1}
                  </div>
                  <p className="text-slate-700">{story}</p>
                </div>
              ))}
            </div>
          </div>

          <h3 className="text-xl font-semibold mt-8 mb-4">Success Metrics</h3>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {[
              { metric: 'Prediction Accuracy', definition: '% of deliveries within predicted window', target: '> 85% within ¬± 3 days at KZ stage', icon: 'üéØ' },
              { metric: 'Uncertainty Reduction', definition: 'Window size reduction vs. OEM baseline', target: '> 50% narrower windows', icon: 'üìâ' },
              { metric: 'Alert Lead Time', definition: 'Days of advance warning for delays', target: '> 5 days notice for delays > 1 week', icon: '‚ö†Ô∏è' },
              { metric: 'Status Freshness', definition: 'Time from OEM status change to SHAED update', target: '< 8 hours (3x daily sync)', icon: '‚è±Ô∏è' },
            ].map(({ metric, definition, target, icon }) => (
              <div key={metric} className="bg-white border border-slate-200 rounded-lg p-4">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">{icon}</span>
                  <h4 className="font-semibold text-slate-800">{metric}</h4>
                </div>
                <p className="text-sm text-slate-600 mb-2">{definition}</p>
                <div className="bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm font-medium inline-block">
                  {target}
                </div>
              </div>
            ))}
          </div>
        </div>
      );
    };

    // Cone of Uncertainty Section
    const ConeSection = () => {
      const [hoveredStage, setHoveredStage] = useState(null);
      
      const stages = [
        { id: 'order', name: 'Order Placed', codes: 'BA ‚Üí BX', window: '10-14 weeks', confidence: 15, color: '#ef4444' },
        { id: 'scheduled', name: 'Scheduled', codes: 'C (sub-firm)', window: '8-10 weeks', confidence: 30, color: '#f97316' },
        { id: 'vin', name: 'VIN Assigned', codes: 'D (firm)', window: '6-8 weeks', confidence: 50, color: '#eab308' },
        { id: 'gateline', name: 'Gateline', codes: 'D1', window: 'March 15 ¬± 5 days', confidence: 70, color: '#84cc16' },
        { id: 'built', name: 'Built & Shipped', codes: 'KZ', window: 'March 18 ¬± 2 days', confidence: 85, color: '#22c55e' },
        { id: 'transit', name: 'In Transit', codes: 'KZ L ‚Üí KZ R', window: 'March 19', confidence: 95, color: '#10b981' },
      ];

      return (
        <div className="space-y-6">
          <h2 className="text-3xl font-bold text-slate-800 mb-6">The Cone of Uncertainty</h2>
          
          <p className="text-slate-600 mb-8">
            At order placement, delivery timing is inherently uncertain. As the vehicle hits key milestones, 
            that uncertainty shrinks. Hover over each stage to see details.
          </p>

          {/* Visual Cone */}
          <div className="bg-slate-900 rounded-xl p-8 mb-8">
            <div className="flex items-end justify-center gap-1 h-64">
              {stages.map((stage, idx) => (
                <div
                  key={stage.id}
                  className="relative flex flex-col items-center cursor-pointer transition-transform hover:scale-105"
                  onMouseEnter={() => setHoveredStage(stage.id)}
                  onMouseLeave={() => setHoveredStage(null)}
                >
                  {/* Bar */}
                  <div 
                    className="w-12 md:w-16 rounded-t-lg transition-all"
                    style={{ 
                      height: `${stage.confidence * 2.4}px`,
                      backgroundColor: stage.color,
                      opacity: hoveredStage === stage.id ? 1 : 0.8
                    }}
                  />
                  {/* Label */}
                  <div className="mt-2 text-center">
                    <div className="text-xs text-slate-400 hidden md:block">{stage.name}</div>
                    <div className="text-xs font-mono text-slate-500">{stage.codes}</div>
                  </div>
                  
                  {/* Tooltip */}
                  {hoveredStage === stage.id && (
                    <div className="absolute bottom-full mb-2 bg-white rounded-lg shadow-xl p-3 w-48 z-10">
                      <div className="font-semibold text-slate-800">{stage.name}</div>
                      <div className="text-sm text-slate-600">Window: {stage.window}</div>
                      <div className="text-sm font-medium" style={{ color: stage.color }}>
                        {stage.confidence}% confidence
                      </div>
                    </div>
                  )}
                </div>
              ))}
            </div>
            
            {/* Legend */}
            <div className="flex justify-between mt-6 text-slate-400 text-sm">
              <span>Low Confidence</span>
              <span>High Confidence</span>
            </div>
          </div>

          {/* Stage Details Table */}
          <div className="overflow-x-auto">
            <table className="w-full border-collapse">
              <thead>
                <tr className="bg-blue-600 text-white">
                  <th className="px-4 py-3 text-left rounded-tl-lg">Stage</th>
                  <th className="px-4 py-3 text-left">Milestone Codes</th>
                  <th className="px-4 py-3 text-left">Example Window</th>
                  <th className="px-4 py-3 text-left rounded-tr-lg">Confidence</th>
                </tr>
              </thead>
              <tbody>
                {stages.map((stage, idx) => (
                  <tr 
                    key={stage.id} 
                    className={`border-b border-slate-200 ${idx % 2 === 0 ? 'bg-slate-50' : 'bg-white'} hover:bg-blue-50 transition-colors`}
                  >
                    <td className="px-4 py-3 font-medium">{stage.name}</td>
                    <td className="px-4 py-3 font-mono text-sm">{stage.codes}</td>
                    <td className="px-4 py-3">{stage.window}</td>
                    <td className="px-4 py-3">
                      <div className="flex items-center gap-2">
                        <div className="w-24 h-2 bg-slate-200 rounded-full overflow-hidden">
                          <div 
                            className="h-full rounded-full transition-all"
                            style={{ width: `${stage.confidence}%`, backgroundColor: stage.color }}
                          />
                        </div>
                        <span className="text-sm font-medium">{stage.confidence}%</span>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          <div className="bg-blue-50 rounded-xl p-6 mt-6">
            <p className="text-slate-700">
              <span className="font-semibold text-blue-800">SHAED's Goal:</span> Provide more accurate windows 
              than the OEM at every stage‚Äîand proactively alert stakeholders when a vehicle is tracking behind 
              expected timelines.
            </p>
          </div>
        </div>
      );
    };

    // Architecture Section
    const ArchitectureSection = () => (
      <div className="space-y-6">
        <h2 className="text-3xl font-bold text-slate-800 mb-6">Technical Architecture</h2>
        
        <h3 className="text-xl font-semibold mb-4">Data Landscape</h3>
        
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
          <div className="bg-slate-50 rounded-xl p-6">
            <h4 className="font-semibold text-slate-800 mb-4 flex items-center gap-2">
              <span className="w-3 h-3 rounded-full bg-blue-500"></span>
              Current State
            </h4>
            <ul className="space-y-3">
              <li className="flex items-start gap-2">
                <span className="text-blue-500 mt-1">‚Ä¢</span>
                <div><span className="font-medium">Sources:</span> CSV exports from OEM portals (8 OEMs)</div>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-blue-500 mt-1">‚Ä¢</span>
                <div><span className="font-medium">Frequency:</span> Full snapshots pulled 3x daily</div>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-blue-500 mt-1">‚Ä¢</span>
                <div><span className="font-medium">Volume:</span> ~85,000 historical, ~18,000 active</div>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-blue-500 mt-1">‚Ä¢</span>
                <div><span className="font-medium">OEM Systems:</span> View/Update Inventory, VIN Tracking, My Inventory</div>
              </li>
            </ul>
          </div>
          
          <div className="bg-emerald-50 rounded-xl p-6">
            <h4 className="font-semibold text-slate-800 mb-4 flex items-center gap-2">
              <span className="w-3 h-3 rounded-full bg-emerald-500"></span>
              Future State
            </h4>
            <ul className="space-y-3">
              <li className="flex items-start gap-2">
                <span className="text-emerald-500 mt-1">‚Ä¢</span>
                <div>API-based ingestion for real-time updates</div>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-emerald-500 mt-1">‚Ä¢</span>
                <div>Event-driven architecture for status change detection</div>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-emerald-500 mt-1">‚Ä¢</span>
                <div>Webhook-based notifications</div>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-emerald-500 mt-1">‚Ä¢</span>
                <div>Streaming ingestion via Pub/Sub</div>
              </li>
            </ul>
          </div>
        </div>

        {/* Data Flow Diagram */}
        <h3 className="text-xl font-semibold mb-4">Data Flow</h3>
        <div className="bg-slate-900 rounded-xl p-6 overflow-x-auto">
          <div className="flex items-center justify-between min-w-max gap-4 text-white">
            <div className="flex flex-col items-center">
              <div className="w-24 h-20 bg-slate-700 rounded-lg flex items-center justify-center text-center p-2">
                <span className="text-sm">OEM Portals</span>
              </div>
              <span className="text-xs text-slate-400 mt-2">Stellantis, Ford, GM...</span>
            </div>
            
            <div className="text-2xl flow-arrow">‚Üí</div>
            
            <div className="flex flex-col items-center">
              <div className="w-24 h-20 bg-slate-700 rounded-lg flex items-center justify-center text-center p-2">
                <span className="text-sm">CSV Export</span>
              </div>
              <span className="text-xs text-slate-400 mt-2">3x daily</span>
            </div>
            
            <div className="text-2xl flow-arrow">‚Üí</div>
            
            <div className="flex flex-col items-center">
              <div className="w-24 h-20 bg-slate-600 rounded-lg flex items-center justify-center text-center p-2">
                <span className="text-sm">Cloud Storage</span>
              </div>
              <span className="text-xs text-slate-400 mt-2">Landing Zone</span>
            </div>
            
            <div className="text-2xl flow-arrow">‚Üí</div>
            
            <div className="flex gap-2">
              <div className="flex flex-col items-center">
                <div className="w-20 h-20 gradient-bronze rounded-lg flex items-center justify-center">
                  <span className="text-sm font-bold">BRONZE</span>
                </div>
                <span className="text-xs text-slate-400 mt-2">Raw</span>
              </div>
              <div className="text-xl self-center">‚Üí</div>
              <div className="flex flex-col items-center">
                <div className="w-20 h-20 gradient-silver rounded-lg flex items-center justify-center">
                  <span className="text-sm font-bold text-slate-800">SILVER</span>
                </div>
                <span className="text-xs text-slate-400 mt-2">Cleaned</span>
              </div>
              <div className="text-xl self-center">‚Üí</div>
              <div className="flex flex-col items-center">
                <div className="w-20 h-20 gradient-gold rounded-lg flex items-center justify-center">
                  <span className="text-sm font-bold text-slate-800">GOLD</span>
                </div>
                <span className="text-xs text-slate-400 mt-2">Business</span>
              </div>
            </div>
            
            <div className="text-2xl flow-arrow">‚Üí</div>
            
            <div className="flex flex-col items-center">
              <div className="w-24 h-20 bg-blue-600 rounded-lg flex items-center justify-center text-center p-2">
                <span className="text-sm font-bold">SHAED Dashboard</span>
              </div>
              <span className="text-xs text-slate-400 mt-2">User Interface</span>
            </div>
          </div>
        </div>
      </div>
    );

    // Medallion Architecture Section
    const MedallionSection = () => {
      const [activeLayer, setActiveLayer] = useState('bronze');
      
      const layers = {
        bronze: {
          name: 'Bronze Layer',
          subtitle: 'Raw',
          gradient: 'from-amber-700 to-amber-900',
          borderColor: 'border-amber-600',
          purpose: 'Immutable landing zone for raw OEM data exactly as received.',
          characteristics: [
            { label: 'Schema', value: 'OEM-native (varies by manufacturer)' },
            { label: 'Transformations', value: 'None‚Äîdata stored exactly as received' },
            { label: 'Key Fields Added', value: '_ingestion_timestamp, _source_file, _oem_code' },
            { label: 'Retention', value: 'Indefinite (audit trail, reprocessing capability)' },
            { label: 'Tables', value: 'bronze_stellantis_orders, bronze_ford_orders, bronze_gm_orders, etc.' },
          ],
          example: 'vehicle_order_number | vin | status_code | dealer_code | order_date | ... | _ingestion_timestamp | _source_file'
        },
        silver: {
          name: 'Silver Layer',
          subtitle: 'Cleaned & Normalized',
          gradient: 'from-slate-400 to-slate-600',
          borderColor: 'border-slate-400',
          purpose: 'OEM-agnostic data model with universal status codes and detected events.',
          characteristics: [
            { label: 'Schema', value: 'Universal SHAED schema (OEM-agnostic)' },
            { label: 'Transformations', value: 'Status code mapping, deduplication, data quality checks, event detection' },
            { label: 'Key Logic', value: 'Compare snapshots to detect status changes ‚Üí generate event records' },
            { label: 'Tables', value: 'silver_orders (current state), silver_order_events (status change log)' },
          ],
          example: 'order_id | von | vin | shaed_status | oem_code | dealer_id | event_timestamp | previous_status | new_status'
        },
        gold: {
          name: 'Gold Layer',
          subtitle: 'Business-Ready',
          gradient: 'from-yellow-400 to-amber-500',
          borderColor: 'border-yellow-400',
          purpose: 'Analytics, predictions, and API-ready views for the SHAED dashboard.',
          characteristics: [
            { label: 'Schema', value: 'Optimized for specific use cases (dashboard, alerts, analytics)' },
            { label: 'Transformations', value: 'Aggregations, predictions, KPIs, alert triggers' },
            { label: 'Key Logic', value: 'ETA calculations, stage duration analysis, anomaly detection' },
            { label: 'Tables', value: 'gold_order_tracker, gold_eta_predictions, gold_stage_durations, gold_alerts' },
          ],
          example: 'order_id | current_status | predicted_eta | eta_window_low | eta_window_high | confidence_score | is_delayed'
        },
      };

      return (
        <div className="space-y-6">
          <h2 className="text-3xl font-bold text-slate-800 mb-2">Medallion Architecture</h2>
          <p className="text-slate-600 mb-6">
            SHAED implements a three-layer data architecture in BigQuery that separates raw data 
            preservation from transformation and business logic.
          </p>

          {/* Layer Selector */}
          <div className="flex gap-4 mb-6">
            {Object.entries(layers).map(([key, layer]) => (
              <button
                key={key}
                onClick={() => setActiveLayer(key)}
                className={`flex-1 p-4 rounded-xl transition-all ${
                  activeLayer === key 
                    ? `bg-gradient-to-br ${layer.gradient} text-white shadow-lg scale-105` 
                    : 'bg-slate-100 hover:bg-slate-200'
                }`}
              >
                <div className="font-bold text-lg">{layer.name}</div>
                <div className={activeLayer === key ? 'text-white/80' : 'text-slate-500'}>{layer.subtitle}</div>
              </button>
            ))}
          </div>

          {/* Layer Details */}
          <div className={`border-2 ${layers[activeLayer].borderColor} rounded-xl p-6 bg-white`}>
            <div className="mb-4">
              <span className={`inline-block px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r ${layers[activeLayer].gradient} text-white`}>
                {layers[activeLayer].name}
              </span>
            </div>
            
            <p className="text-lg text-slate-700 mb-6">
              <span className="font-semibold">Purpose:</span> {layers[activeLayer].purpose}
            </p>

            <div className="space-y-3">
              {layers[activeLayer].characteristics.map(({ label, value }) => (
                <div key={label} className="flex flex-col md:flex-row md:items-start gap-2 bg-slate-50 rounded-lg p-3">
                  <span className="font-semibold text-slate-700 md:w-40 flex-shrink-0">{label}:</span>
                  <span className="text-slate-600">{value}</span>
                </div>
              ))}
            </div>

            <div className="mt-6 bg-slate-900 rounded-lg p-4">
              <div className="text-xs text-slate-400 mb-2">Example Schema</div>
              <code className="text-sm text-emerald-400 font-mono break-all">
                {layers[activeLayer].example}
              </code>
            </div>
          </div>

          {/* Universal Status Mapping */}
          <h3 className="text-xl font-semibold mt-8 mb-4">Universal Status Mapping (Silver Layer)</h3>
          <div className="overflow-x-auto">
            <table className="w-full border-collapse">
              <thead>
                <tr className="bg-slate-200">
                  <th className="px-4 py-3 text-left font-semibold">SHAED Status</th>
                  <th className="px-4 py-3 text-left font-semibold">Stellantis</th>
                  <th className="px-4 py-3 text-left font-semibold">Ford</th>
                  <th className="px-4 py-3 text-left font-semibold">GM</th>
                </tr>
              </thead>
              <tbody>
                {[
                  { shaed: 'ORDER_PLACED', stellantis: 'BA, BB, BD, BE', ford: '[mapped]', gm: '[mapped]' },
                  { shaed: 'ORDER_ACCEPTED', stellantis: 'BG, BX', ford: '[mapped]', gm: '[mapped]' },
                  { shaed: 'SCHEDULED_TENTATIVE', stellantis: 'C', ford: '[mapped]', gm: '[mapped]' },
                  { shaed: 'SCHEDULED_FIRM', stellantis: 'D', ford: '[mapped]', gm: '[mapped]' },
                  { shaed: 'GATELINE', stellantis: 'D1', ford: '[mapped]', gm: '[mapped]' },
                  { shaed: 'IN_PRODUCTION', stellantis: 'E, F, G', ford: '[mapped]', gm: '[mapped]' },
                  { shaed: 'BUILT', stellantis: 'I, J, KZ', ford: '[mapped]', gm: '[mapped]' },
                  { shaed: 'IN_TRANSIT', stellantis: 'KZ L ‚Üí KZ R', ford: '[mapped]', gm: '[mapped]' },
                  { shaed: 'DELIVERED', stellantis: 'KZ X', ford: '[mapped]', gm: '[mapped]' },
                ].map((row, idx) => (
                  <tr key={row.shaed} className={idx % 2 === 0 ? 'bg-white' : 'bg-slate-50'}>
                    <td className="px-4 py-2 font-mono text-sm font-medium text-blue-600">{row.shaed}</td>
                    <td className="px-4 py-2 font-mono text-sm">{row.stellantis}</td>
                    <td className="px-4 py-2 font-mono text-sm text-slate-400">{row.ford}</td>
                    <td className="px-4 py-2 font-mono text-sm text-slate-400">{row.gm}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      );
    };

    // Data Model Section
    const TablesSection = () => (
      <div className="space-y-6">
        <h2 className="text-3xl font-bold text-slate-800 mb-6">Key Table Definitions</h2>

        <Collapsible title="silver_order_events (Event Log)" defaultOpen={true}>
          <p className="text-slate-600 mb-4">
            Captures every status transition for historical analysis and prediction training.
          </p>
          <div className="overflow-x-auto">
            <table className="w-full border-collapse text-sm">
              <thead>
                <tr className="bg-slate-200">
                  <th className="px-4 py-2 text-left">Column</th>
                  <th className="px-4 py-2 text-left">Type</th>
                  <th className="px-4 py-2 text-left">Description</th>
                </tr>
              </thead>
              <tbody>
                {[
                  { col: 'event_id', type: 'STRING', desc: 'Unique event identifier' },
                  { col: 'order_id', type: 'STRING', desc: 'SHAED universal order ID' },
                  { col: 'von', type: 'STRING', desc: 'Vehicle Order Number (OEM)' },
                  { col: 'vin', type: 'STRING', desc: 'VIN (populated at SCHEDULED_FIRM)' },
                  { col: 'previous_status', type: 'STRING', desc: 'SHAED universal status before change' },
                  { col: 'new_status', type: 'STRING', desc: 'SHAED universal status after change' },
                  { col: 'oem_status_code', type: 'STRING', desc: 'Raw OEM status code (e.g., KZ L)' },
                  { col: 'event_timestamp', type: 'TIMESTAMP', desc: 'When status change was detected' },
                  { col: 'oem_code', type: 'STRING', desc: 'OEM identifier (STELLANTIS, FORD, etc.)' },
                  { col: 'dealer_id', type: 'STRING', desc: 'Ordering dealer identifier' },
                ].map((row, idx) => (
                  <tr key={row.col} className={idx % 2 === 0 ? 'bg-white' : 'bg-slate-50'}>
                    <td className="px-4 py-2 font-mono text-blue-600">{row.col}</td>
                    <td className="px-4 py-2 font-mono text-slate-500">{row.type}</td>
                    <td className="px-4 py-2">{row.desc}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </Collapsible>

        <Collapsible title="gold_eta_predictions" defaultOpen={true}>
          <p className="text-slate-600 mb-4">
            Current predicted delivery date and confidence for each active order.
          </p>
          <div className="overflow-x-auto">
            <table className="w-full border-collapse text-sm">
              <thead>
                <tr className="bg-yellow-100">
                  <th className="px-4 py-2 text-left">Column</th>
                  <th className="px-4 py-2 text-left">Type</th>
                  <th className="px-4 py-2 text-left">Description</th>
                </tr>
              </thead>
              <tbody>
                {[
                  { col: 'order_id', type: 'STRING', desc: 'SHAED universal order ID' },
                  { col: 'current_status', type: 'STRING', desc: 'Current SHAED universal status' },
                  { col: 'oem_eta', type: 'DATE', desc: 'OEM-provided estimate (baseline)' },
                  { col: 'predicted_eta', type: 'DATE', desc: 'SHAED predicted delivery date' },
                  { col: 'eta_window_low', type: 'DATE', desc: 'Lower bound of prediction window' },
                  { col: 'eta_window_high', type: 'DATE', desc: 'Upper bound of prediction window' },
                  { col: 'confidence_score', type: 'FLOAT', desc: '0-1 confidence in prediction' },
                  { col: 'days_in_current_stage', type: 'INT', desc: 'Days since last status change' },
                  { col: 'expected_stage_days', type: 'INT', desc: 'Historical avg days for this stage' },
                  { col: 'is_delayed', type: 'BOOL', desc: 'True if exceeds expected duration' },
                  { col: 'last_updated', type: 'TIMESTAMP', desc: 'When prediction was last calculated' },
                ].map((row, idx) => (
                  <tr key={row.col} className={idx % 2 === 0 ? 'bg-white' : 'bg-yellow-50'}>
                    <td className="px-4 py-2 font-mono text-amber-600">{row.col}</td>
                    <td className="px-4 py-2 font-mono text-slate-500">{row.type}</td>
                    <td className="px-4 py-2">{row.desc}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </Collapsible>

        <Collapsible title="gold_stage_durations (Reference Table)">
          <p className="text-slate-600 mb-4">
            Historical percentiles for stage durations, segmented by key attributes.
          </p>
          <div className="overflow-x-auto">
            <table className="w-full border-collapse text-sm">
              <thead>
                <tr className="bg-yellow-100">
                  <th className="px-4 py-2 text-left">Column</th>
                  <th className="px-4 py-2 text-left">Type</th>
                  <th className="px-4 py-2 text-left">Description</th>
                </tr>
              </thead>
              <tbody>
                {[
                  { col: 'from_status', type: 'STRING', desc: 'Starting status' },
                  { col: 'to_status', type: 'STRING', desc: 'Ending status' },
                  { col: 'oem_code', type: 'STRING', desc: 'OEM identifier' },
                  { col: 'vehicle_series', type: 'STRING', desc: 'Vehicle model/series' },
                  { col: 'median_days', type: 'INT', desc: 'P50 duration in days' },
                  { col: 'p25_days', type: 'INT', desc: 'P25 duration (optimistic)' },
                  { col: 'p75_days', type: 'INT', desc: 'P75 duration (conservative)' },
                  { col: 'p90_days', type: 'INT', desc: 'P90 duration (worst case)' },
                  { col: 'sample_count', type: 'INT', desc: 'Number of observations' },
                ].map((row, idx) => (
                  <tr key={row.col} className={idx % 2 === 0 ? 'bg-white' : 'bg-yellow-50'}>
                    <td className="px-4 py-2 font-mono text-amber-600">{row.col}</td>
                    <td className="px-4 py-2 font-mono text-slate-500">{row.type}</td>
                    <td className="px-4 py-2">{row.desc}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </Collapsible>
      </div>
    );

    // Prediction Section
    const PredictionSection = () => (
      <div className="space-y-6">
        <h2 className="text-3xl font-bold text-slate-800 mb-6">ETA Prediction Approach</h2>
        
        <p className="text-slate-600 mb-6">
          Predictions are built from historical stage durations, segmented by key attributes.
        </p>

        <div className="bg-slate-900 rounded-xl p-6 mb-6">
          <h4 className="text-emerald-400 font-semibold mb-3">Stage Duration Analysis Query</h4>
          <pre className="text-sm text-slate-300 overflow-x-auto">
{`SELECT
  from_status,
  to_status,
  oem_code,
  vehicle_series,
  APPROX_QUANTILES(days_in_stage, 100)[OFFSET(50)] AS median_days,
  APPROX_QUANTILES(days_in_stage, 100)[OFFSET(25)] AS p25_days,
  APPROX_QUANTILES(days_in_stage, 100)[OFFSET(75)] AS p75_days,
  APPROX_QUANTILES(days_in_stage, 100)[OFFSET(90)] AS p90_days
FROM silver_order_events
WHERE event_timestamp > DATE_SUB(CURRENT_DATE(), INTERVAL 12 MONTH)
GROUP BY from_status, to_status, oem_code, vehicle_series`}
          </pre>
        </div>

        <h3 className="text-xl font-semibold mb-4">Prediction Calculation Steps</h3>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
          {[
            { step: 1, title: 'Identify Status', desc: 'Determine current status (e.g., SCHEDULED_FIRM)' },
            { step: 2, title: 'Lookup Durations', desc: 'Get median duration for each remaining stage' },
            { step: 3, title: 'Sum Remaining', desc: 'Add durations to get predicted days to delivery' },
            { step: 4, title: 'Apply Window', desc: 'Use P25/P75 for bounds, P90 for worst-case' },
          ].map(({ step, title, desc }) => (
            <div key={step} className="bg-white border border-slate-200 rounded-lg p-4">
              <div className="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold mb-3">
                {step}
              </div>
              <h4 className="font-semibold text-slate-800 mb-1">{title}</h4>
              <p className="text-sm text-slate-600">{desc}</p>
            </div>
          ))}
        </div>

        <h3 className="text-xl font-semibold mb-4">Segmentation Dimensions</h3>
        <p className="text-slate-600 mb-4">Stage durations vary significantly by:</p>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
          {[
            { dim: 'OEM', desc: 'Stellantis vs. Ford vs. GM have different production cadences', icon: 'üè≠' },
            { dim: 'Vehicle Series', desc: 'ProMaster vs. Ram 3500 have different build times', icon: 'üöê' },
            { dim: 'Plant', desc: 'Different plants have different throughput', icon: '‚öôÔ∏è' },
            { dim: 'Order Type', desc: 'Fleet vs. stock orders may prioritize differently', icon: 'üìã' },
            { dim: 'Destination', desc: 'Transit time varies by distance from plant', icon: 'üìç' },
          ].map(({ dim, desc, icon }) => (
            <div key={dim} className="bg-slate-50 rounded-lg p-4 flex items-start gap-3">
              <span className="text-2xl">{icon}</span>
              <div>
                <h4 className="font-semibold text-slate-800">{dim}</h4>
                <p className="text-sm text-slate-600">{desc}</p>
              </div>
            </div>
          ))}
        </div>

        <h3 className="text-xl font-semibold mb-4">Anomaly Detection & Alerts</h3>
        <div className="bg-red-50 border border-red-200 rounded-xl p-6">
          <p className="text-slate-700 mb-4">Flag orders that exceed expected stage duration:</p>
          <div className="bg-slate-900 rounded-lg p-4 mb-4">
            <pre className="text-sm text-slate-300 overflow-x-auto">
{`SELECT *
FROM gold_eta_predictions
WHERE days_in_current_stage > expected_stage_days * 1.5
  AND current_status NOT IN ('DELIVERED', 'CANCELLED')`}
            </pre>
          </div>
          <div className="bg-white rounded-lg p-4 border-l-4 border-red-500">
            <p className="text-sm text-slate-600">
              <span className="font-semibold">Example Alert:</span> "Contact OEM rep‚Äîorder stuck in BG status for 12 days vs. expected 5 days"
            </p>
          </div>
        </div>
      </div>
    );

    // Stellantis Codes Section
    const StellantisSection = () => {
      const [filter, setFilter] = useState('all');
      
      const codes = [
        { code: 'BA', desc: 'Clean order not accepted by OEM', shaed: 'ORDER_PLACED', phase: 'order', editable: true },
        { code: 'BB', desc: 'Fleet order only ‚Äì review by Bid Dept', shaed: 'ORDER_PLACED', phase: 'order', editable: true },
        { code: 'BD', desc: 'Special equipment processing', shaed: 'ORDER_PLACED', phase: 'order', editable: true },
        { code: 'BE', desc: 'Edit error ‚Äì coding error must be corrected', shaed: 'ORDER_PLACED', phase: 'order', editable: true },
        { code: 'BG', desc: 'Clean order accepted by OEM', shaed: 'ORDER_ACCEPTED', phase: 'order', editable: true },
        { code: 'BG F', desc: 'Finance hold ‚Äì auto cancellation after 15 days', shaed: 'ORDER_ACCEPTED', phase: 'order', editable: true },
        { code: 'BG B', desc: 'Build out hold', shaed: 'ORDER_ACCEPTED', phase: 'order', editable: true },
        { code: 'BG L', desc: 'Material restriction hold', shaed: 'ORDER_ACCEPTED', phase: 'order', editable: true },
        { code: 'BG M', desc: 'Material hold (fleet)', shaed: 'ORDER_ACCEPTED', phase: 'order', editable: true },
        { code: 'BX', desc: 'Clean order moved to available to schedule', shaed: 'ORDER_ACCEPTED', phase: 'order', editable: true },
        { code: 'C', desc: 'Sub-firm scheduled (no VIN, not editable)', shaed: 'SCHEDULED_TENTATIVE', phase: 'scheduled', editable: false },
        { code: 'D', desc: 'Firm scheduled (VIN assigned)', shaed: 'SCHEDULED_FIRM', phase: 'scheduled', editable: false },
        { code: 'D1', desc: 'Gateline ‚Äì plant has sequenced for production', shaed: 'GATELINE', phase: 'scheduled', editable: false },
        { code: 'E', desc: 'Framing', shaed: 'IN_PRODUCTION', phase: 'build', editable: false },
        { code: 'F', desc: 'Paint', shaed: 'IN_PRODUCTION', phase: 'build', editable: false },
        { code: 'G', desc: 'Trim', shaed: 'IN_PRODUCTION', phase: 'build', editable: false },
        { code: 'I', desc: 'Unit is pending final inspection', shaed: 'BUILT', phase: 'built', editable: false },
        { code: 'J', desc: 'Vehicle has passed final inspection but not released', shaed: 'BUILT', phase: 'built', editable: false },
        { code: 'JB', desc: 'Shipped to body vendor', shaed: 'BUILT', phase: 'built', editable: false },
        { code: 'JE', desc: 'Shipped to emissions', shaed: 'BUILT', phase: 'built', editable: false },
        { code: 'KZ', desc: 'Released by plant and invoiced', shaed: 'BUILT', phase: 'built', editable: false },
        { code: 'KZ L', desc: 'Released but not shipped', shaed: 'IN_TRANSIT', phase: 'transit', editable: false },
        { code: 'KZ M', desc: 'First rail departure', shaed: 'IN_TRANSIT', phase: 'transit', editable: false },
        { code: 'KZ N', desc: 'First rail arrival', shaed: 'IN_TRANSIT', phase: 'transit', editable: false },
        { code: 'KZ O', desc: 'Delayed/received', shaed: 'IN_TRANSIT', phase: 'transit', editable: false },
        { code: 'KZ R', desc: 'Vehicle within a few days of arrival to dealer', shaed: 'IN_TRANSIT', phase: 'transit', editable: false },
        { code: 'KZ T', desc: 'Second rail departure', shaed: 'IN_TRANSIT', phase: 'transit', editable: false },
        { code: 'KZ U', desc: 'Second rail arrival', shaed: 'IN_TRANSIT', phase: 'transit', editable: false },
        { code: 'KZ X', desc: 'Delivered to dealer', shaed: 'DELIVERED', phase: 'delivered', editable: false },
        { code: 'ZA', desc: 'Cancelled order', shaed: 'CANCELLED', phase: 'other', editable: false },
      ];

      const phases = [
        { id: 'all', label: 'All', color: 'bg-slate-500' },
        { id: 'order', label: 'Order', color: 'bg-red-500' },
        { id: 'scheduled', label: 'Scheduled', color: 'bg-orange-500' },
        { id: 'build', label: 'Build', color: 'bg-yellow-500' },
        { id: 'built', label: 'Built', color: 'bg-lime-500' },
        { id: 'transit', label: 'Transit', color: 'bg-emerald-500' },
        { id: 'delivered', label: 'Delivered', color: 'bg-blue-500' },
      ];

      const phaseColors = {
        order: 'bg-red-100 text-red-800',
        scheduled: 'bg-orange-100 text-orange-800',
        build: 'bg-yellow-100 text-yellow-800',
        built: 'bg-lime-100 text-lime-800',
        transit: 'bg-emerald-100 text-emerald-800',
        delivered: 'bg-blue-100 text-blue-800',
        other: 'bg-slate-100 text-slate-800',
      };

      const filteredCodes = filter === 'all' ? codes : codes.filter(c => c.phase === filter);

      return (
        <div className="space-y-6">
          <h2 className="text-3xl font-bold text-slate-800 mb-6">Stellantis Status Code Reference</h2>
          
          <p className="text-slate-600 mb-6">
            Complete mapping of Stellantis status codes to SHAED universal statuses. 
            Filter by phase to explore the order lifecycle.
          </p>

          {/* Phase Filter */}
          <div className="flex flex-wrap gap-2 mb-6">
            {phases.map(({ id, label, color }) => (
              <button
                key={id}
                onClick={() => setFilter(id)}
                className={`px-4 py-2 rounded-lg font-medium transition-all ${
                  filter === id 
                    ? `${color} text-white` 
                    : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                }`}
              >
                {label}
                <span className="ml-2 text-sm opacity-75">
                  ({id === 'all' ? codes.length : codes.filter(c => c.phase === id).length})
                </span>
              </button>
            ))}
          </div>

          {/* Codes Table */}
          <div className="overflow-x-auto">
            <table className="w-full border-collapse">
              <thead>
                <tr className="bg-blue-600 text-white">
                  <th className="px-4 py-3 text-left">Code</th>
                  <th className="px-4 py-3 text-left">Stellantis Description</th>
                  <th className="px-4 py-3 text-left">SHAED Status</th>
                  <th className="px-4 py-3 text-left">Phase</th>
                  <th className="px-4 py-3 text-center">Editable</th>
                </tr>
              </thead>
              <tbody>
                {filteredCodes.map((row, idx) => (
                  <tr 
                    key={row.code} 
                    className={`border-b border-slate-200 ${idx % 2 === 0 ? 'bg-white' : 'bg-slate-50'} hover:bg-blue-50 transition-colors`}
                  >
                    <td className="px-4 py-3 font-mono font-bold text-slate-800">{row.code}</td>
                    <td className="px-4 py-3 text-slate-600">{row.desc}</td>
                    <td className="px-4 py-3">
                      <span className="font-mono text-sm bg-blue-100 text-blue-700 px-2 py-1 rounded">
                        {row.shaed}
                      </span>
                    </td>
                    <td className="px-4 py-3">
                      <span className={`text-xs px-2 py-1 rounded-full font-medium ${phaseColors[row.phase]}`}>
                        {row.phase}
                      </span>
                    </td>
                    <td className="px-4 py-3 text-center">
                      {row.editable ? (
                        <span className="text-green-500">‚úì</span>
                      ) : (
                        <span className="text-slate-300">‚Äî</span>
                      )}
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          <div className="bg-amber-50 border border-amber-200 rounded-xl p-4 mt-6">
            <h4 className="font-semibold text-amber-800 mb-2">Key Milestone: VIN Assignment</h4>
            <p className="text-slate-700">
              Orders can be viewed by VON (Vehicle Order Number) from BA through C status. 
              At <span className="font-mono font-bold">D status</span>, a VIN is assigned and the order becomes 
              trackable by both VON and VIN through delivery (KZ X).
            </p>
          </div>
        </div>
      );
    };

    // Future State Section
    const FutureSection = () => (
      <div className="space-y-6">
        <h2 className="text-3xl font-bold text-slate-800 mb-6">Future State</h2>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white">
            <h3 className="text-xl font-bold mb-4">BigQuery ML for Predictive ETAs</h3>
            <p className="text-purple-100 mb-4">
              Move beyond percentile-based predictions to ML models that incorporate:
            </p>
            <ul className="space-y-2">
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>Seasonality (Q4 slowdowns, holiday impacts)</span>
              </li>
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>Supply chain signals (material holds)</span>
              </li>
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>Order configuration complexity</span>
              </li>
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>Real-time production line status</span>
              </li>
            </ul>
          </div>

          <div className="bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl p-6 text-white">
            <h3 className="text-xl font-bold mb-4">End-to-End Tracking</h3>
            <p className="text-emerald-100 mb-4">
              Extend tracking beyond OEM delivery to include:
            </p>
            <ul className="space-y-2">
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span><strong>Upfit Phase:</strong> ETA for work completion</span>
              </li>
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span><strong>Final Mile:</strong> Transport to end customer</span>
              </li>
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span><strong>In-Service Date:</strong> Fleet operation start</span>
              </li>
            </ul>
          </div>

          <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white">
            <h3 className="text-xl font-bold mb-4">API-First Ingestion</h3>
            <p className="text-blue-100 mb-4">
              Replace CSV exports with real-time or near-real-time APIs:
            </p>
            <ul className="space-y-2">
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>OEM API integrations</span>
              </li>
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>Webhook-based notifications</span>
              </li>
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>Streaming via Pub/Sub</span>
              </li>
            </ul>
          </div>

          <div className="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white">
            <h3 className="text-xl font-bold mb-4">Confidence Scoring</h3>
            <p className="text-orange-100 mb-4">
              Display confidence levels in the UI based on:
            </p>
            <ul className="space-y-2">
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>Data quality metrics</span>
              </li>
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>Historical accuracy for segment</span>
              </li>
              <li className="flex items-center gap-2">
                <Icons.Check />
                <span>Sample size indicators</span>
              </li>
            </ul>
          </div>
        </div>

        {/* Roadmap Timeline */}
        <h3 className="text-xl font-semibold mt-8 mb-4">Implementation Roadmap</h3>
        <div className="relative">
          <div className="absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200"></div>
          {[
            { phase: 'Phase 1', title: 'Foundation', items: ['Medallion architecture in BigQuery', 'Universal status normalization', 'Basic percentile predictions'], status: 'current' },
            { phase: 'Phase 2', title: 'Enhancement', items: ['Segmented predictions', 'Anomaly detection', 'Alert system'], status: 'next' },
            { phase: 'Phase 3', title: 'Intelligence', items: ['BigQuery ML integration', 'Confidence scoring', 'End-to-end tracking'], status: 'future' },
            { phase: 'Phase 4', title: 'Real-time', items: ['API-first ingestion', 'Streaming updates', 'Predictive analytics'], status: 'future' },
          ].map(({ phase, title, items, status }) => (
            <div key={phase} className="relative pl-10 pb-8">
              <div className={`absolute left-2 w-5 h-5 rounded-full border-2 ${
                status === 'current' ? 'bg-blue-500 border-blue-500' :
                status === 'next' ? 'bg-white border-blue-500' :
                'bg-white border-slate-300'
              }`}></div>
              <div className={`bg-white border rounded-lg p-4 ${
                status === 'current' ? 'border-blue-500 shadow-lg' : 'border-slate-200'
              }`}>
                <div className="flex items-center gap-2 mb-2">
                  <span className={`text-sm font-bold px-2 py-0.5 rounded ${
                    status === 'current' ? 'bg-blue-100 text-blue-700' :
                    status === 'next' ? 'bg-slate-100 text-slate-700' :
                    'bg-slate-50 text-slate-500'
                  }`}>{phase}</span>
                  <span className="font-semibold text-slate-800">{title}</span>
                </div>
                <ul className="text-sm text-slate-600 space-y-1">
                  {items.map(item => (
                    <li key={item} className="flex items-center gap-2">
                      <span className="w-1.5 h-1.5 rounded-full bg-slate-400"></span>
                      {item}
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          ))}
        </div>
      </div>
    );

    // Main App
    const App = () => {
      const [activeSection, setActiveSection] = useState('overview');

      const renderSection = () => {
        switch (activeSection) {
          case 'overview': return <OverviewSection />;
          case 'problem': return <ProblemSection />;
          case 'users': return <UsersSection />;
          case 'cone': return <ConeSection />;
          case 'architecture': return <ArchitectureSection />;
          case 'medallion': return <MedallionSection />;
          case 'tables': return <TablesSection />;
          case 'prediction': return <PredictionSection />;
          case 'stellantis': return <StellantisSection />;
          case 'future': return <FutureSection />;
          default: return <OverviewSection />;
        }
      };

      return (
        <div className="min-h-screen bg-slate-100">
          <Navigation activeSection={activeSection} setActiveSection={setActiveSection} />
          <main className="ml-64 p-8">
            <div className="max-w-5xl mx-auto">
              {renderSection()}
            </div>
          </main>
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
